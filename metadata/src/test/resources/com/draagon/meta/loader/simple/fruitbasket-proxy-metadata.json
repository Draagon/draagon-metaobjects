{"$schema": "simple-model.schema.json",
 "metadata": {"package": "simple::fruitbasket",
  "children": [

    {"field": {"package": "simple::common", "name": "id", "subType": "long", "@isAbstract": true,
      "children": [
        {"attr": {"name": "isKey", "subType": "boolean", "value": true}}
      ]}},

    {"field": {"package": "simple::common", "name": "name", "subType": "string", "@isAbstract": true,
      "children": [
        {"validator": {"subType": "required"}},
        {"validator": {"subType": "length", "@min": 1, "@max": 50}}
      ]}},

    {"object": {"name": "Basket", "subType": "proxy", "@object": "com.metaobjects.test.proxy.fruitbasket.Basket",
      "children": [
        {"key": {"name": "primary", "subType": "primary", "@keys": "id"}},
        {"field": {"name": "id", "super": "..::common::id"}},
        {"field": {"name": "name", "super": "..::common::name"}},
        {"field": {"name": "numApples", "subType": "int",
          "children": [
            {"validator": {"subType": "length", "@min": 0, "@max": 10}}
          ]}},
        {"field": {"name": "numOranges", "subType": "int",
          "children": [
            {"validator": {"subType": "length", "@min": 0, "@max": 10}}
          ]}},
        {"field": {"name": "fruitIds", "subType": "objectArray", "@objectRef": "::Apple"}},
        {"field": {"name": "apples", "subType": "objectArray", "@objectRef": "::Apple"}},
        {"field": {"name": "oranges", "subType": "objectArray", "@objectRef": "::Orange"}}
      ]}},

    {"object": {"name": "BasketToFruit", "subType": "proxy", "@object": "com.metaobjects.test.proxy.fruitbasket.BasketToFruit",
      "children": [
        {"key": {"name": "primary", "subType": "primary", "@keys": "basketId,fruitId"}},
        {"key": {"subType": "foreign", "name": "basketKey", "@keys": "basketId", "@foreignObjectRef": "::Basket"}},
        {"key": {"subType": "foreign", "name": "fruitKey", "@keys": "fruitId", "@foreignObjectRef": "::Fruit"}},
        {"field": {"name": "basketId", "super": "..::common::id"}},
        {"field": {"name": "fruitId", "super": "..::common::id"}}
      ]}},

    {"object": {"name": "Fruit", "subType": "proxy", "@isAbstract": true, "@object": "com.metaobjects.test.proxy.fruitbasket.Fruit",
      "children": [
        {"key": {"name": "primary", "subType": "primary", "@keys": "id"}},
        {"key": {"subType": "foreign", "name": "basketKey", "@keys": "basketId", "@foreignObjectRef": "::Basket"}},
        {"field": {"name": "id", "super": "..::common::id"}},
        {"field": {"name": "name", "super": "..::common::name"}},
        {"field": {"name": "basketId", "super": "..::common::id"}},
        {"field": {"name": "length", "subType": "int"}},
        {"field": {"name": "weight", "subType": "int"}},
        {"field": {"name": "inBasket", "subType": "boolean"}}
      ]}},

    {"object": {"name": "Apple", "super": "Fruit", "@object": "com.metaobjects.test.proxy.fruitbasket.Apple",
      "children": [
        {"field": {"name": "orchard", "subType": "string"}},
        {"field": {"name": "worms", "subType": "int"}}
      ]}},

    {"object": {"name": "Macintosh", "super": "Apple", "@object": "com.metaobjects.test.proxy.fruitbasket.Macintosh"}},

    {"object": {"name": "Orange", "super": "Fruit", "@object": "com.metaobjects.test.proxy.fruitbasket.Orange",
      "children": [
        {"field": {"name": "pickedDate", "subType": "date"}}
      ]}}
  ]
}}