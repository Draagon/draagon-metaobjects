{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://draagon.com/schema/metamodel/simple/simple-model.schema.json",
  "title": "Simple MetaModel Schema",
  "description": "JSON Schema for Draagon MetaObjects Simple Model",
  "type": "object",
  "properties": {
    "metadata": {
      "$ref": "#/definitions/metadata"
    }
  },
  "required": ["metadata"],
  "definitions": {
    "metadata": {
      "type": "object",
      "properties": {
        "package": {
          "type": "string"
        },
        "children": {
          "type": "array",
          "items": {
            "oneOf": [
              {"$ref": "#/definitions/objectWrapper"},
              {"$ref": "#/definitions/fieldWrapper"},
              {"$ref": "#/definitions/validatorWrapper"}
            ]
          }
        }
      },
      "additionalProperties": false
    },
    "objectWrapper": {
      "type": "object",
      "properties": {
        "object": {"$ref": "#/definitions/object"}
      },
      "required": ["object"],
      "additionalProperties": false
    },
    "fieldWrapper": {
      "type": "object",
      "properties": {
        "field": {"$ref": "#/definitions/field"}
      },
      "required": ["field"],
      "additionalProperties": false
    },
    "validatorWrapper": {
      "type": "object",
      "properties": {
        "validator": {"$ref": "#/definitions/validator"}
      },
      "required": ["validator"],
      "additionalProperties": false
    },
    "attrWrapper": {
      "type": "object",
      "properties": {
        "attr": {"$ref": "#/definitions/attr"}
      },
      "required": ["attr"],
      "additionalProperties": false
    },
    "keyWrapper": {
      "type": "object",
      "properties": {
        "key": {"$ref": "#/definitions/key"}
      },
      "required": ["key"],
      "additionalProperties": false
    },
    "attr": {
      "type": "object",
      "properties": {
        "package": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["string", "stringArray", "properties", "class", "boolean", "int"]
        },
        "super": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "object": {
      "type": "object",
      "properties": {
        "package": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["pojo", "map", "proxy"]
        },
        "super": {
          "type": "string"
        },
        "_isAbstract": {
          "type": "string"
        },
        "isInterface": {
          "type": "boolean"
        },
        "object": {
          "type": "string"
        },
        "proxyObject": {
          "type": "string"
        },
        "children": {
          "type": "array",
          "items": {
            "oneOf": [
              {"$ref": "#/definitions/attrWrapper"},
              {"$ref": "#/definitions/keyWrapper"},
              {"$ref": "#/definitions/fieldWrapper"}
            ]
          }
        }
      },
      "additionalProperties": false
    },
    "key": {
      "type": "object",
      "properties": {
        "package": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["primary", "secondary", "foreign"]
        },
        "super": {
          "type": "string"
        },
        "keys": {
          "type": "string"
        },
        "foreignObjectRef": {
          "type": "string"
        },
        "foreignKey": {
          "type": "string"
        },
        "children": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/attrWrapper"
          }
        }
      },
      "additionalProperties": false
    },
    "field": {
      "type": "object",
      "properties": {
        "package": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["boolean", "byte", "short", "int", "long", "float", "double", "string", "date", "class", "stringArray", "object", "objectArray"]
        },
        "super": {
          "type": "string"
        },
        "_isAbstract": {
          "type": "string"
        },
        "validation": {
          "type": "string"
        },
        "defaultValue": {
          "type": "string"
        },
        "objectRef": {
          "type": "string"
        },
        "children": {
          "type": "array",
          "items": {
            "oneOf": [
              {"$ref": "#/definitions/attrWrapper"},
              {"$ref": "#/definitions/validatorWrapper"}
            ]
          }
        }
      },
      "additionalProperties": false
    },
    "validator": {
      "type": "object",
      "properties": {
        "package": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": ["required", "regex", "numeric", "length", "array"]
        },
        "super": {
          "type": "string"
        },
        "mask": {
          "type": "string"
        },
        "min": {
          "type": "integer"
        },
        "max": {
          "type": "integer"
        },
        "minSize": {
          "type": "integer"
        },
        "maxSize": {
          "type": "integer"
        },
        "children": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/attrWrapper"
          }
        }
      },
      "additionalProperties": false
    }
  }
}