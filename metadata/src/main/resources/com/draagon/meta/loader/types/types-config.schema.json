{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://www.draagon.com/types/v2/types-config.schema.json",
  "title": "MetaObjects Types Configuration",
  "description": "JSON Schema for MetaObjects types configuration, equivalent to types-config.xsd",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "The JSON Schema reference"
    },
    "types": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/typeDef"
      }
    },
    "rules": {
      "$ref": "#/definitions/rulesDef"
    }
  },
  "required": ["types"],
  "additionalProperties": false,
  "definitions": {
    "typeDef": {
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/typeNameDef"
        },
        "class": {
          "$ref": "#/definitions/classDef"
        },
        "defaultSubType": {
          "$ref": "#/definitions/defSubTypeNameDef"
        },
        "defaultName": {
          "$ref": "#/definitions/typeNameDef"
        },
        "defaultNamePrefix": {
          "$ref": "#/definitions/typeNameDef"
        },
        "children": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/childDef"
          }
        },
        "subTypes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/subTypeDef"
          }
        }
      },
      "required": ["name", "class"],
      "additionalProperties": false
    },
    "subTypeDef": {
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/metaDataNameDef"
        },
        "class": {
          "$ref": "#/definitions/classDef"
        },
        "children": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/childDef"
          }
        }
      },
      "required": ["name", "class"],
      "additionalProperties": false
    },
    "childDef": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/typeNameDef"
        },
        "subType": {
          "$ref": "#/definitions/subTypeNameDef"
        },
        "name": {
          "$ref": "#/definitions/metaDataNameDef"
        },
        "nameAliases": {
          "$ref": "#/definitions/typeNameArrayDef"
        }
      },
      "required": ["type", "subType", "name"],
      "additionalProperties": false
    },
    "rulesDef": {
      "type": "object",
      "properties": {
        "rules": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ruleDef"
          }
        }
      },
      "additionalProperties": false
    },
    "ruleDef": {
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/typeNameDef"
        }
      },
      "required": ["name"],
      "additionalProperties": false
    },
    "baseNameDef": {
      "type": "string",
      "pattern": "^[_a-zA-Z/*]([a-zA-Z0-9_/-])*$"
    },
    "typeNameDef": {
      "type": "string",
      "pattern": "^[a-zA-Z]([a-zA-Z0-9_/-])*$"
    },
    "defSubTypeNameDef": {
      "type": "string",
      "pattern": "^[a-zA-Z]([a-zA-Z0-9_/-])*$"
    },
    "subTypeNameDef": {
      "type": "string",
      "pattern": "^[a-zA-Z/*]([a-zA-Z0-9_/-])*$"
    },
    "metaDataNameDef": {
      "$ref": "#/definitions/baseNameDef"
    },
    "typeNameArrayDef": {
      "type": "string",
      "pattern": "^([_a-zA-Z/*]([a-zA-Z0-9/-])*)([,_a-zA-Z/*]([a-zA-Z0-9/-])*)$"
    },
    "classDef": {
      "type": "string",
      "pattern": "^([\\p{L}_$][\\p{L}\\p{N}_$]*\\.)*[\\p{L}_$][\\p{L}\\p{N}_$]*$"
    }
  }
}